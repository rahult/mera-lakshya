<% content_for :head do %>
    <script type="text/javascript">
        var data =
        $(function() {
            var seriesOptions = [];
            var yAxisOptions = [];
            var colors = Highcharts.getOptions().colors;


            <% users.each_with_index do |user, index| %>
                seriesOptions[<%= index %>] = {
                    name: "<%= user %>",
                    data: <%= user.data %>,
                    shadow : true,
                    marker : {
                      enabled : true,
                      radius : 3
                    }
                };
            <% end %>

            createChart();

            // create the chart when all data is loaded
            function createChart() {

                chart = new Highcharts.StockChart({
                    chart: {
                        renderTo: 'score-chart'
                    },

                    rangeSelector: {
                        selected: 4
                    },

                    tooltip: {
                        pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',
                        valueDecimals: 0
                    },

                    series: seriesOptions
                });
            }
        });
    </script>
<% end %>

<div id="score-chart"></div>
